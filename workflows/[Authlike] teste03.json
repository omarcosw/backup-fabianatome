{
  "active": true,
  "activeVersion": {
    "updatedAt": "2025-12-04T17:51:22.126Z",
    "createdAt": "2025-12-04T17:51:22.126Z",
    "versionId": "780152f6-7114-4844-8660-3e79abc892d6",
    "workflowId": "ATj1Y1rHwankg4MZ",
    "nodes": [
      {
        "parameters": {
          "httpMethod": "POST",
          "path": "respondeu",
          "options": {}
        },
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 2.1,
        "position": [
          -512,
          -48
        ],
        "id": "9e32f8dd-a775-458b-a9a7-873076b2a08e",
        "name": "Webhook",
        "webhookId": "19b06634-56a9-40e7-b7f5-cec8264363c9"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "d1e97ae9-fc65-4e50-8c19-d85292d1aed7",
                "name": "nome",
                "value": "={{ $json.body.data.pushName }}",
                "type": "string"
              },
              {
                "id": "8484fee6-413b-4837-a4e4-878771d18e3a",
                "name": "telefone",
                "value": "={{ $json.body.data.key.remoteJid }}",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          -288,
          -48
        ],
        "id": "141d025b-6f0c-414b-aa7d-ad93d89ff49a",
        "name": "Edit Fields"
      },
      {
        "parameters": {
          "jsCode": "// Pega o array de entrada\nconst items = $input.all();\n\n// Processa cada item\nreturn items.map(item => {\n  const data = item.json;\n  \n  return {\n    json: {\n      nome: data.nome,\n      telefone: data.telefone.replace('@s.whatsapp.net', '')\n    }\n  };\n});"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          -80,
          -48
        ],
        "id": "d9f45fce-8c9d-4d2a-8e68-d9cac1bbb474",
        "name": "Code in JavaScript"
      },
      {
        "parameters": {
          "operation": "get",
          "tableId": "authlike",
          "filters": {
            "conditions": [
              {
                "keyName": "telefone",
                "keyValue": "={{ $json.telefone }}"
              }
            ]
          }
        },
        "type": "n8n-nodes-base.supabase",
        "typeVersion": 1,
        "position": [
          144,
          -48
        ],
        "id": "024c2f97-bb76-4c47-a140-84bf1d3f2b21",
        "name": "Get a row",
        "alwaysOutputData": true,
        "credentials": {
          "supabaseApi": {
            "id": "06funpVK0RasJnc4",
            "name": "Supabase - Fabiana Tomé"
          }
        }
      },
      {
        "parameters": {
          "conditions": {
            "options": {
              "caseSensitive": true,
              "leftValue": "",
              "typeValidation": "strict",
              "version": 2
            },
            "conditions": [
              {
                "id": "97d7bcd7-3ce7-4034-b361-ab2dea080cf9",
                "leftValue": "={{ $json.telefone }}",
                "rightValue": "",
                "operator": {
                  "type": "string",
                  "operation": "exists",
                  "singleValue": true
                }
              }
            ],
            "combinator": "and"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.if",
        "typeVersion": 2.2,
        "position": [
          416,
          -48
        ],
        "id": "1e236233-1036-4f71-aa67-0177a0139c8a",
        "name": "If1"
      },
      {
        "parameters": {
          "operation": "update",
          "tableId": "authlike",
          "filters": {
            "conditions": [
              {
                "keyName": "telefone",
                "condition": "eq",
                "keyValue": "={{ $json.telefone }}"
              }
            ]
          },
          "fieldsUi": {
            "fieldValues": [
              {
                "fieldId": "respondeu_mensagem",
                "fieldValue": "true"
              }
            ]
          }
        },
        "type": "n8n-nodes-base.supabase",
        "typeVersion": 1,
        "position": [
          704,
          -64
        ],
        "id": "dc5d5a5e-b422-4bfb-b038-e9c621616514",
        "name": "Update a row",
        "credentials": {
          "supabaseApi": {
            "id": "06funpVK0RasJnc4",
            "name": "Supabase - Fabiana Tomé"
          }
        }
      }
    ],
    "connections": {
      "Webhook": {
        "main": [
          [
            {
              "node": "Edit Fields",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Edit Fields": {
        "main": [
          [
            {
              "node": "Code in JavaScript",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Code in JavaScript": {
        "main": [
          [
            {
              "node": "Get a row",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get a row": {
        "main": [
          [
            {
              "node": "If1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "If1": {
        "main": [
          [
            {
              "node": "Update a row",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Update a row": {
        "main": [
          []
        ]
      }
    },
    "authors": "AuthLike ME",
    "name": null,
    "description": null,
    "autosaved": false
  },
  "activeVersionId": "780152f6-7114-4844-8660-3e79abc892d6",
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Get a row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a row": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Update a row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update a row": {
      "main": [
        []
      ]
    }
  },
  "createdAt": "2025-12-04T14:12:40.307Z",
  "id": "ATj1Y1rHwankg4MZ",
  "isArchived": false,
  "meta": null,
  "name": "[Authlike] teste03",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "respondeu",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -512,
        -48
      ],
      "id": "9e32f8dd-a775-458b-a9a7-873076b2a08e",
      "name": "Webhook",
      "webhookId": "19b06634-56a9-40e7-b7f5-cec8264363c9"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d1e97ae9-fc65-4e50-8c19-d85292d1aed7",
              "name": "nome",
              "value": "={{ $json.body.data.pushName }}",
              "type": "string"
            },
            {
              "id": "8484fee6-413b-4837-a4e4-878771d18e3a",
              "name": "telefone",
              "value": "={{ $json.body.data.key.remoteJid }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -288,
        -48
      ],
      "id": "141d025b-6f0c-414b-aa7d-ad93d89ff49a",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "jsCode": "// Pega o array de entrada\nconst items = $input.all();\n\n// Processa cada item\nreturn items.map(item => {\n  const data = item.json;\n  \n  return {\n    json: {\n      nome: data.nome,\n      telefone: data.telefone.replace('@s.whatsapp.net', '')\n    }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -80,
        -48
      ],
      "id": "d9f45fce-8c9d-4d2a-8e68-d9cac1bbb474",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "authlike",
        "filters": {
          "conditions": [
            {
              "keyName": "telefone",
              "keyValue": "={{ $json.telefone }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        144,
        -48
      ],
      "id": "024c2f97-bb76-4c47-a140-84bf1d3f2b21",
      "name": "Get a row",
      "alwaysOutputData": true,
      "credentials": {
        "supabaseApi": {
          "id": "06funpVK0RasJnc4",
          "name": "Supabase - Fabiana Tomé"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "97d7bcd7-3ce7-4034-b361-ab2dea080cf9",
              "leftValue": "={{ $json.telefone }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        416,
        -48
      ],
      "id": "1e236233-1036-4f71-aa67-0177a0139c8a",
      "name": "If1"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "authlike",
        "filters": {
          "conditions": [
            {
              "keyName": "telefone",
              "condition": "eq",
              "keyValue": "={{ $json.telefone }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "respondeu_mensagem",
              "fieldValue": "true"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        704,
        -64
      ],
      "id": "dc5d5a5e-b422-4bfb-b038-e9c621616514",
      "name": "Update a row",
      "credentials": {
        "supabaseApi": {
          "id": "06funpVK0RasJnc4",
          "name": "Supabase - Fabiana Tomé"
        }
      }
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "webhook.fabianatome.com.br",
            "user-agent": "axios/1.12.2",
            "content-length": "1731",
            "accept": "application/json, text/plain, */*",
            "accept-encoding": "gzip, compress, deflate, br",
            "content-type": "application/json",
            "x-forwarded-for": "172.18.0.1",
            "x-forwarded-host": "webhook.fabianatome.com.br",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "55c61d0068b6",
            "x-real-ip": "172.18.0.1"
          },
          "params": {},
          "query": {},
          "body": {
            "event": "messages.upsert",
            "instance": "testemarcos",
            "data": {
              "key": {
                "remoteJid": "5511984151865@s.whatsapp.net",
                "remoteJidAlt": "164132359811272@lid",
                "fromMe": false,
                "id": "3EB0FA305409B97F49F638",
                "participant": "",
                "addressingMode": "pn"
              },
              "pushName": "Higor Leite",
              "status": "DELIVERY_ACK",
              "message": {
                "messageContextInfo": {
                  "deviceListMetadata": {
                    "senderKeyIndexes": [],
                    "recipientKeyIndexes": [],
                    "senderKeyHash": {
                      "0": 252,
                      "1": 105,
                      "2": 39,
                      "3": 171,
                      "4": 114,
                      "5": 44,
                      "6": 227,
                      "7": 17,
                      "8": 221,
                      "9": 37
                    },
                    "senderTimestamp": {
                      "low": 1764703523,
                      "high": 0,
                      "unsigned": true
                    },
                    "senderAccountType": 0,
                    "receiverAccountType": 0,
                    "recipientKeyHash": {
                      "0": 136,
                      "1": 190,
                      "2": 141,
                      "3": 109,
                      "4": 85,
                      "5": 132,
                      "6": 178,
                      "7": 106,
                      "8": 197,
                      "9": 20
                    },
                    "recipientTimestamp": {
                      "low": 1764788449,
                      "high": 0,
                      "unsigned": true
                    }
                  },
                  "deviceListMetadataVersion": 2,
                  "messageSecret": {
                    "0": 156,
                    "1": 222,
                    "2": 118,
                    "3": 93,
                    "4": 157,
                    "5": 142,
                    "6": 202,
                    "7": 159,
                    "8": 199,
                    "9": 170,
                    "10": 207,
                    "11": 217,
                    "12": 150,
                    "13": 145,
                    "14": 253,
                    "15": 226,
                    "16": 207,
                    "17": 198,
                    "18": 210,
                    "19": 193,
                    "20": 77,
                    "21": 14,
                    "22": 146,
                    "23": 217,
                    "24": 27,
                    "25": 255,
                    "26": 225,
                    "27": 159,
                    "28": 139,
                    "29": 107,
                    "30": 198,
                    "31": 116
                  },
                  "limitSharingV2": {
                    "trigger": 0,
                    "initiatedByMe": false
                  }
                },
                "conversation": "estou bem e voce?"
              },
              "contextInfo": {
                "mentionedJid": [],
                "groupMentions": [],
                "ephemeralSettingTimestamp": {
                  "low": 1764685878,
                  "high": 0,
                  "unsigned": false
                },
                "disappearingMode": {
                  "initiator": 0,
                  "trigger": 1,
                  "initiatedByMe": false
                }
              },
              "messageType": "conversation",
              "messageTimestamp": 1764858731,
              "instanceId": "9f5f9ded-e93e-4b17-b48f-cdacf8a54321",
              "source": "web"
            },
            "destination": "https://webhook.fabianatome.com.br/webhook/respondeu",
            "date_time": "2025-12-04T11:32:11.943Z",
            "sender": "5527998210071@s.whatsapp.net",
            "server_url": "https://evolution.fabianatome.com.br",
            "apikey": "4CD6960BD8E2-4899-A24C-BC73EDA99976"
          },
          "webhookUrl": "https://webhook.fabianatome.com.br/webhook/respondeu",
          "executionMode": "production"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "updatedAt": "2025-12-04T14:12:40.307Z",
      "createdAt": "2025-12-04T14:12:40.307Z",
      "role": "workflow:owner",
      "workflowId": "ATj1Y1rHwankg4MZ",
      "projectId": "tP5lcLj6t4StcK5B"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-12-06T13:28:53.495Z",
  "versionId": "780152f6-7114-4844-8660-3e79abc892d6"
}